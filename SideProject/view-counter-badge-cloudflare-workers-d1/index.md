+++
title = "[å€‹äººå°ˆæ¡ˆ] ç¶²é è¨ˆæ•¸å™¨å¾½ç«  View Counter Badge â€”â€” ç€è¦§æ•¸åˆ¥å†é€äººå•¦ï¼ä»¥ Cloudflare Workers D1 å¯¦ä½œé©åˆç´”å‰ç«¯ç¶²é çš„è¨ˆæ•¸å™¨"
description = "æ•™ä½ å¦‚ä½•åœ¨ Cloudflare ä¸Šä»¥ Worker å’Œ D1 å¯¦ç¾ç¶²é è¨ˆæ•¸å™¨åŠŸèƒ½ï¼Œä¸ç”¨ç¶­è­·ä¼ºæœå™¨ä¸”å…è²»! ä½ ä¸éœ€è¦æ¶è¨­ä»»ä½•æ©Ÿå™¨ï¼Œé€™æ˜¯ä¸€å€‹ç´”é›²ç«¯çš„è§£æ±ºæ–¹æ¡ˆã€‚Hit Counter"
date = 2023-11-04T23:37:00.035Z
updated = 2024-01-04T04:02:20.503Z
draft = false
aliases = [ "/2023/11/view-counter-badge-cloudflare-workers-d1.html" ]

[taxonomies]
tags = [ "JavaScript", "Cloudflare" ]

[extra]
banner = "preview.png"
iscn = "iscn://likecoin-chain/QtqpvBsnP3QM8w-GOALiQOHdgZzkY52bd1vg73Gj3D4/"

  [extra.comments]
  id = "111355087211175088"
+++
<figure>

![view-counter-badge](preview.png)
<figcaption>Image Creator from Microsoft Bing DALLâ€¢E 3</figcaption>
</figure>

> ![View counter badge](https://view-counter.jim60105.workers.dev/?style=flat&labelColor=141414&color=orange&scale=2#no-hover)  
> ç¶²é è¨ˆæ•¸å™¨æ˜¯ä¸€å€‹é›»è…¦ç¨‹å¼ï¼Œå¯ä»¥é¡¯ç¤ºç‰¹å®šç¶²é ç€è¦½çš„æ¬¡æ•¸ã€‚  
> ç•¶ç¶²é ç€è¦½å™¨è¨ªå•æ­¤ç¶²é æ™‚ï¼Œç¶²é è¨ˆæ•¸å™¨å°±æœƒåŠ ä¸€ã€‚

é€™æ˜¯ä¸€ç¨®æ­·å²æ‚ ä¹…çš„å°å·¥å…·ï¼Œå¾æˆ‘åå¹¾å¹´å‰é–‹å§‹ä½¿ç”¨éƒ¨è½æ ¼æ™‚ Blogger å°±å·²ç¶“å…§å»ºäº†é€™å€‹åŠŸèƒ½ï¼Œç¶²è·¯ä¸Šä¹Ÿæœ‰å¾ˆå¤š[ç¾æˆçš„æœå‹™](https://www.google.com/search?q=Web+hit+counter+online)ï¼Œç‚ºä»€éº¼æˆ‘å€‘ä»æ‡‰è‡ªå·±åšå‘¢?

## ç‚ºä»€éº¼ä½ æ‡‰è©²åœæ­¢ä½¿ç”¨ç¬¬ä¸‰æ–¹è¨ˆæ•¸å™¨

ç•¶æœ‰äººè¨ªå•æˆ‘çš„éƒ¨è½æ ¼æ™‚ï¼Œå®ƒæœƒå‘ **è¨ˆæ•¸å™¨çš„ä¼ºæœå™¨** ç™¼é€ä¸€å€‹è¨Šæ¯èªªã€Œblog.maki0419.com è¢«è¨ªå•äº†ï¼Œè«‹å°‡è¨ªå•æ•¸ +1ï¼Œä¸¦å°‡ç¾æœ‰æ•¸å­—å¾è³‡æ–™åº«è®€å‡ºä¾†çµ¦æˆ‘ï¼ã€é€™å€‹è¨ˆæ•¸å™¨ä¼ºæœå™¨æœƒ **ä¿å­˜æˆ‘çš„è¨ªå•æ•¸æ“š**(å’Œç”¨æˆ¶æ•¸æ“š)ï¼Œä¸¦ **åŸ·è¡Œä¸€æ®µç¨‹å¼ç¢¼** ä¾†é¡¯ç¤ºæ•¸å­—ã€‚é€šå¸¸é€™æ®µç¨‹å¼çš„åŸå§‹ç¢¼æˆ‘çœ‹ä¸è¦‹å®ƒï¼Œå®ƒä¹Ÿ<span class="danger">å¯èƒ½éš¨æ™‚è¢«æ›¿æ›æˆæƒ¡æ„ç¨‹å¼ç¢¼</span>ã€‚æ ¹æ“šæˆ‘çš„åµŒå…¥å‹å¼ï¼Œæˆ–è¨±<span class="danger">äººå®¶é‚„èƒ½ç²å¾— SEO åŠ åˆ†å‘¢ï¼</span>

ä½ å¯èƒ½æœƒèªªã€Œ**æˆ‘ä¸æƒ³ç‚ºäº†é€™å€‹å°åŠŸèƒ½è€Œå¤šé–‹ä¸€å°ä¼ºæœå™¨å’Œè³‡æ–™åº«ï¼Œé€™æ˜¯ä¸€å€‹<span class="danger">åˆç†çš„å–æ¨</span>**ã€

ä¸ä¸ä¸ï¼Œç¾åœ¨æˆ‘å°±å‘Šè¨´ä½ å¦‚ä½•åœ¨ Cloudflare ä¸Šä»¥ Worker å’Œ D1 Database å¯¦ç¾è¨ˆæ•¸å™¨åŠŸèƒ½ï¼Œ<span class="success">ä¸ç”¨ç¶­è­·ä¼ºæœå™¨</span>ä¸”<span class="success">å…è²»</span>ï¼ä½ å°‡æ“æœ‰ç¨‹å¼ç¢¼å’Œæ•¸å­—çš„æ§åˆ¶æ¬Šï¼Œ<span class="success">ä¿è­·ä½ çš„ç¶²ç«™ï¼Œä¿è­·ä½ çš„ç”¨æˆ¶</span>ã€‚

é€™æ˜¯ä¸€å€‹ç´”é›²ç«¯çš„è§£æ±ºæ–¹æ¡ˆï¼Œå¾ˆé©åˆç”¨åœ¨ç´”å‰ç«¯æ‡‰ç”¨ç¨‹å¼æˆ–æ˜¯ä»»ä½•é¡å‹çš„ç¶²é ã€‚  
å°ˆæ¡ˆæ˜¯å›å‚³ SVG badgeï¼Œä½†æ˜¯ç°¡å–®ä¿®æ”¹å°±èƒ½è®Šæˆå›å‚³æ•¸å­—åšç‚º API ä½¿ç”¨([ç¯„ä¾‹](https://github.com/sound-buttons/worker-click-counter))ï¼Œæ³›ç”¨æ€§éå¸¸é«˜ã€‚<!--more-->

ä¸éå®ƒä¸¦ä¸æ˜¯å®Œå…¨å…è²»ï¼ŒFree plan æœ‰è‘—æ¯æ—¥ _100,000_ æ¬¡çš„ä¸Šé™ã€‚  
è‹¥ä½ çš„ç¶²ç«™æœ‰è‘—è¶…é _åè¬æ¬¡_ çš„æ—¥ç€è¦§é‡ï¼Œè«‹è¨‚é–± Paid plan (5 ç¾å…ƒ/æœˆ) ä»¥æå‡è‡³æ¯æ—¥ _äº”åƒè¬æ¬¡_ã€‚  
è«‹åƒè€ƒ[å®˜æ–¹æ–‡ä»¶](https://developers.cloudflare.com/d1/platform/pricing/#billing-metrics)èªªæ˜ã€‚

## è¨­å®šæ­¥é©Ÿ

> GitHub
>
> ---
> <https://github.com/jim60105/worker-view-counter-badge>

* é»æ“Šé€™å€‹æŒ‰éˆ•ï¼Œç„¶å¾ŒæŒ‰ç…§æ­¥é©Ÿéƒ¨ç½²ä½ çš„å°ˆæ¡ˆã€‚åœ¨éç¨‹ä¸­å®ƒæœƒå¸¶è‘—ä½ ç™»å…¥(æˆ–è¨»å†Š) GitHub å’Œ Cloudflare å¸³æˆ¶ã€‚  

  <figure>
  
  [![](https://deploy.workers.cloudflare.com/button)](https://deploy.workers.cloudflare.com/?url=https://github.com/jim60105/worker-view-counter-badge)  
  <figcaption>è¶…ç´šç¥å¥‡æŒ‰éˆ•ï¼</figcaption>
  </figure>
  
  æµç¨‹éå®Œå¾Œè«‹å›åˆ° GitHubï¼Œæ­¤æ™‚çš„ Action å°‡æœƒéƒ¨ç½²å¤±æ•—ï¼Œè«‹å‹™å¿…ç¹¼çºŒå®Œæˆä»¥ä¸‹è¨­å®šã€‚  

  > æ³¨æ„  
  >
  > ---
  > åœ¨ç”¢ç”Ÿ Cloudflare Token çš„æ­¥é©Ÿä¸­ï¼Œè«‹å…ˆé¸æ“‡ **Edit Cloudflare Workers** templateï¼Œç„¶å¾Œå†åŠ ä¸Š **Account - D1 - Edit** æ¬Šé™
  >
  > [![](3.png)](3.png)
  >
  > Token è¤‡è£½èµ·ä¾†ï¼Œå¾Œé¢é‚„æœƒç”¨åˆ°

* åœ¨ GitHub ä¸Šé–‹å•Ÿæ–°çš„ Codespaceï¼Œç­‰å¾…è¼‰å…¥å®Œæˆ  
  [![](1.png#full-bleed)](1.png)
* åœ¨ `wrangler.toml` ä¸­æ›´æ”¹ç¬¬ä¸€è¡Œçš„`name` å±¬æ€§ï¼Œé€™å°‡æ˜¯å°å·¥å…·çš„ worker nameï¼Œé—œä¿‚åˆ°å­åŸŸåã€‚ä½ çš„ Cloudflare Worker æœƒè¢«éƒ¨ç½²åœ¨`{worker-name}.{cloudflare-id}.workers.dev`ã€‚  
  [![](2.png#full-bleed)](2.png)
* åœ¨çµ‚ç«¯æ©ŸåŒ¯å…¥ Cloudflare Token (è¨»:[ç‚ºä½•é€™è£¡ä¸ä½¿ç”¨ OAuth login](https://github.com/cloudflare/workers-sdk/issues/2874))  

  ```bash
  export CLOUDFLARE_API_TOKEN=ä¸€é•·ä¸²token
  ```
  
  [![](5.png#full-bleed)](5.png)
  
  > ç‚ºäº†é¿å…èˆ‡æˆ‘ç¾æœ‰çš„è³‡æ–™åº«ç”¢ç”Ÿè¡çªï¼Œåœ¨æ¼”ç¤ºæ™‚æˆ‘ä½¿ç”¨äº† ViewCounter2 åšç‚ºè³‡æ–™åº«åç¨±ï¼Œä½†ä½ æ‡‰è©²ä½¿ç”¨ ViewCounterï¼

* å»ºç«‹æ–°çš„ D1 Database  

  ```bash
  npx wrangler d1 create ViewCounter
  ```

* ç”±æŒ‡ä»¤çš„åŸ·è¡Œçµæœå¾—åˆ°ä½ çš„ `database_id`ï¼Œå°‡å®ƒå¡«å›åˆ°`wrangler.toml` æ–‡ä»¶ä¸­ä¸¦å­˜æª”
* åˆå§‹åŒ– D1 è³‡æ–™åº«  
  åœ¨çµ‚ç«¯æ©ŸåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä»¥å»ºç«‹ç©ºè³‡æ–™è¡¨  

  ```bash
  npx wrangler d1 execute ViewCounter --file=./init_database.sql
  ```

* åœ¨å´æ¬„åˆ‡æ›åˆ°ã€ŒåŸå§‹æª”æ§åˆ¶ã€é ç±¤ï¼Œå¯«é»ä»€éº¼ä¸Šå»å¾Œ Commit  
  [![](6.png#full-bleed)](6.png)
* åˆ‡è¨˜ <span class="success">Sync Changes</span>!
* ç­‰å¾… Action åŸ·è¡ŒæˆåŠŸ  
[![](7.png#full-bleed)](7.png)
* è©¦è©¦è¨ªå•ä½ çš„ badgeï¼Œå®ƒçš„ç¶²å€åœ¨`{worker-name}.{cloudflare-id}.workers.dev`  
  ä¾‹å¦‚æˆ‘çš„æ˜¯: <https://view-counter-test.jim60105.workers.dev/>

## ä½¿ç”¨ä½ çš„Counter badge

åœ¨ä½ çš„ç¶²é ä¸­åŠ å…¥ img æ¨™ç±¤ï¼Œsrc å°±æ˜¯`{worker-name}.{cloudflare-id}.workers.dev`  

```html
<img src="https://{worker-name}.{cloudflare-id}.workers.dev" alt="View counter badge" />
```

> ![View counter badge](https://view-counter.jim60105.workers.dev/?style=flat&labelColor=141414&color=orange&scale=2)  
> ä½ çš„å¾½ç« æ˜¯ä¸æ˜¯é•·å¾—å’Œæˆ‘ä¸ä¸€æ¨£?  
> åœ¨[èªªæ˜æ–‡ä»¶](https://github.com/jim60105/worker-view-counter-badge#customization)ä¸­æŸ¥çœ‹æ›´å¤šå®¢åˆ¶åŒ–é¸é …ğŸ˜

> å»¶ä¼¸é–±è®€
>
> ---
> [ç³çš„å‚™å¿˜æ‰‹æœ­: Cloudflare Workerså…¥é–€ â”€ ç°¡ä»‹](/2021/02/cloudflare-workers-introduction.html)
